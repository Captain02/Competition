function addNewsToList(a){var t=window.document.location.pathname,s=t.substring(0,t.substr(1).indexOf("/")+1),e=$("<li data-info-type="+a.type+" data-info-username="+a.fromName+" data-info-userId="+a.fromId+" data-info-touserId="+a.toId+" data-info-status='0' onselectstart='return false;'  data-info-headfile="+a.user.headFile+"><div class='row'><div class='col-md-2'><div class='person-img friend-img clearfix'><img src="+s+"/personHeadFile/"+a.user.headFile+"></div></div><div class='col-md-10'><div class='charts-myfriends-text'><p class='charts-friends-info-abbr clearfix'>"+a.fromName+"<span class='label-new-info-num pull-right'>1</span></p><p class='charts-text-abbr'>"+a.text+"</p></div></div></div><span class='date hidden'>"+a.date+"</span><span class='answerAddress hidden'>"+a.answerAddress+"</span></li>");$(".char-comment").append(e);var i=$("li[data-info-userid="+e.attr("data-info-userid")+"][data-info-type='sendTalk']");$("span.label-new-info-num").html(i.length),e.siblings("[data-info-username="+e.attr("data-info-username")+"][data-info-type='addFrends']").remove(),e.siblings("[data-info-userid="+e.attr("data-info-userid")+"][data-info-type='sendTalk']").hide()}function addMessageToMessageList(a,t){var s=window.document.location.pathname,e=s.substring(0,s.substr(1).indexOf("/")+1),i=$("<li class='in "+t+"'><a><img src="+e+"/personHeadFile/"+a.user.headFile+" class='avatar'></a><div class='message'><span class='arrow'></span><a class='name' href='/user/show/1503578717063303691' target='_blank'>"+a.fromName+"</a><span class='datetime'>"+a.date+"</span><span class='body'>"+a.text+"</span></div></li>");$(".cool-chat").append(i),$("p.input-chat-text").html(""),$("p.input-chat-text").focus()}function addMessage(a,t){a.fromName=t.find("p.charts-friends-info-abbr").html(),a.text=t.find("p.charts-text-abbr").html(),a.date=t.find("span.date").html(),a.user={headFile:t.attr("data-info-headfile")},addMessageToMessageList(a,""),$(".chat-content-body").scrollTop($(".chat-content-body")[0].scrollHeight)}function addFriendsToList(a){var t=window.document.location.pathname,s=t.substring(0,t.substr(1).indexOf("/")+1);$(a.extend.friends).each(function(){var a=$("<li onselectstart='return false;' data-info-userid="+$(this).attr("id")+"><div class='row'><div class='col-md-2'><div class='person-img friend-img clearfix'><img src="+s+"/personHeadFile/"+$(this).attr("headFile")+"></div></div><div class='col-md-10'><div class='charts-myfriends-text'><p class='charts-friends-info-abbr clearfix'>"+$(this).attr("username")+"</p><p class='charts-text-abbr'>暂无简介</p></div></div></div></li>");$(".chart-friends").append(a)})}function chatWindowValue(a,t){$(a).removeClass("hidden"),$(a).attr("data-status",1),$(a).find("h4.chat-content-title").html(t.find("p.charts-friends-info-abbr").html()),$(a).find("button.btn-send").attr("data-info-userid",t.attr("data-info-userid")),$(a).find("a.message-video").attr("data-info-userid",t.attr("data-info-userid"))}function showMessageHistoryArea(){var a=$("#chat-window"),t=$(".chat-content"),s=$(".message-histroty-content");a.hasClass("message-hide")?a.removeClass("message-hide"):a.addClass("message-hide"),t.hasClass("col-md-6")?t.removeClass("col-md-6"):t.addClass("col-md-6"),s.hasClass("hidden")?s.removeClass("hidden"):s.addClass("hidden")}function showOrHide(a){$("div.vtalk-view iframe").remove(),$(".message-histroty-content div.row > div").each(function(){var t=$(this),s=$(this).attr("data-info-type");if($(a).attr("data-info-type")===s)return t.removeClass("hidden"),t.siblings().addClass("hidden"),!1})}function ActivityControl(a,t,s,e){t.val(a.extend.isLike),1==t.val()?s.addClass("controled"):0==t&&s.removeClass("controled"),e.html(a.extend.likeNum)}$(function(){var a=0,t=$(".toggle-btn"),s=$("body"),e=$(".nav-user a"),i=$(".nav-user li");t.mousemove(function(){$(".toggle-btn").css("backgroundColor","rgb(101,206,167)"),$(".toggle-btn span").css("color","white")}),t.mouseout(function(){t.css("backgroundColor","white"),$(".toggle-btn span").css("color","rgb(182, 180, 180)")}),t.click(function(){return a?($("body").addClass("stickey-menu"),$(".content-head-right").removeClass("hidden"),a=0):($("body").removeClass("stickey-menu"),$(".content-head-right").addClass("hidden"),a=1),!1});for(var n=0;n<e.length;n++)$(e[n]).mousemove(function(){s.hasClass("stickey-menu")&&$(this).addClass("show-stickey-menu")}),$(e[n]).mouseout(function(){s.hasClass("stickey-menu")&&$(this).removeClass("show-stickey-menu")});for(var n=0;n<i.length;n++)$(i[n]).mousemove(function(){s.hasClass("stickey-menu")?$(this).addClass("nav-hover-stickety"):$(this).addClass("nav-hover")}),$(i[n]).mouseout(function(){s.hasClass("stickey-menu")?$(this).removeClass("nav-hover-stickety"):$(this).removeClass("nav-hover")});$(".btn-mycomment").click(function(){switch($(".char-comment li").remove(),$(this).attr("data-chat-status")){case"true":$("#chat").slideDown(200),$(this).attr("data-chat-status","flase"),openSocket();break;case"flase":$("#chat").slideUp(200),$(this).attr("data-chat-status","true"),close()}}),$(".char-comment").on("click","li",function(){switch($(this).find("span.label-new-info-num").remove(),$(this).attr("data-info-status","1"),$(this).siblings('li[data-info-type="sendTalk"]').attr("data-info-status",0),$(".cool-chat li").remove(),$(this).attr("data-info-type")){case"addFrends":$("#myModal").modal("show"),ShowTips(".modal-title","好友验证",".modal-body",$(this).find("p.charts-text-abbr").html()+"<a class='not-sure-require-friend pull-right btn btn-warning btn-sm' onclick='notSure(this)' data-not-sure-id="+$(this).attr("data-info-userid")+" data-info-status="+$(this).attr("data-info-status")+">拒绝</a><a class='sure-require-friend pull-right btn btn-success btn-sm' onclick='sure(this)' data-sure-id="+$(this).attr("data-info-userid")+" data-info-status="+$(this).attr("data-info-status")+">同意</a>");break;case"agreeAddFriend":$("#myModal").modal("show"),ShowTips(".modal-title","验证消息",".modal-body",$(this).find("p.charts-text-abbr").html()+"<a style='display:none;' data-info-status="+$(this).attr("data-info-status")+" data-not-sure-id="+$(this).attr("data-info-userid")+"></a>"),setTimeout(function(){$("#myModal").modal("hide")},3e3),$(".char-comment li").each(function(){$(this).attr("data-info-userid")===$(".modal-body a").attr("data-not-sure-id")&&$(this).attr("data-info-status")===$(".modal-body a").attr("data-info-status")&&$(this).remove()}),unAgreeAddFriend($(this).attr("data-info-userid"));break;case"sendTalk":var a=$(this);chatWindowValue("#chat-window",$(this));var t={};$(this).siblings().each(function(){$(this).attr("data-info-userid")===a.attr("data-info-userid")&&"sendTalk"===$(this).attr("data-info-type")&&addMessage(t,$(this))}),addMessage(t,$(this));break;case"videoTalk":chatWindowValue("#chat-window",$(this)),showMessageHistoryArea();var s=$(".message-histroty-content").find("div.video-talk");s.find("a.user-img").find("img").attr("src",""+$(this).find("div.person-img").find("img").attr("src")),s.find("a.answer-video").attr({"data-info-fromid":""+$(this).attr("data-info-userid"),"data-info-toid":""+$(this).attr("data-info-touserid"),"data-info-answeraddress":""+$(this).find("span.answerAddress").html()}),showOrHide($(this))}}),$(".charts-opearte li").each(function(){$(this).click(function(){$(this).attr("data-status",1);var a=$(this);$("div.chat-info").each(function(){$(this).attr("data-index")===a.attr("data-index")&&($(this).removeClass("hidden"),$(this).parent().parent().siblings().find("div.chat-info").addClass("hidden"),a.addClass("active"),a.siblings().removeClass("active"))})})}),$(".chart-friends").on("dblclick","li",function(){chatWindowValue("#chat-window",$(this)),$(".message-histroty-content").addClass("hidden"),$("#chat-window").addClass("message-hide"),$(".chat-content").removeClass("col-md-6")}),$("li.new").each(function(){$(this).click(function(){$("#myModal").modal("show"),ShowTips(".modal-title","公告详情",".modal-body",$(this).find("input.notice-text").val())})}),$(".chat-content-header").mousedown(function(a){a=window.event||a;var t=$("#chat-window").offset(),s=a.pageX-t.left,e=a.pageY-t.top;$(document).bind("mousemove",function(a){$("#chat-window").stop();var t=a.pageX-s,i=a.pageY-e;$("#chat-window").css({left:t+"px",top:i+"px"}),$("body").addClass("no-select")}),$(document).mouseup(function(){$(this).unbind("mousemove"),$("body").removeClass("no-select")})}),$(".btn-close").click(function(){$("div.vtalk-view iframe").remove(),chatWindowClose($(".btn-send").attr("data-info-userid")),function(a){$(a).addClass("hidden"),$(a).attr("data-status",0)}("#chat-window"),$('.char-comment li[data-info-type="sendTalk"]').each(function(){"1"===$(this).attr("data-info-status")&&$(this).attr("data-info-status",0)})}),$(".message-history").click(function(){showMessageHistoryArea(),showOrHide($(this))}),$(".message-history-area li").each(function(){$(this).attr("data-myid")===$(this).attr("data-userid")&&$(this).addClass("my-message")}),$("td.project-grade").each(function(){switch($(this).attr("data-grade")){case"1级":$(this).find("span.label").addClass("label-danger");break;case"2级":$(this).find("span.label").addClass("label-warning");break;case"3级":$(this).find("span.label").addClass("label-primary");break;case"4级":$(this).find("span.label").addClass("label-default")}}),$("#cc-username").click(function(){$("#myModal").modal("show")}),$('input[name="releaseControl"]').each(function(){$(this).val()===$(this).attr("data-releaseControl")&&$(this).prop("checked",!0)}),$("a.p-follow-btn").each(function(){void 0!==$(this).attr("data-state")&&void 0!==$(this).attr("data-project-state")&&$(this).attr("data-state")===$(this).attr("data-project-state")&&$(this).addClass("active")}),$('input[name="releaseControl"]:checked').each(function(){1==$(this).attr("data-control-value")?$("#whitename").show():$("#whitename").hide()}),$('input[name="releaseControl"]').on("click",function(){var a=$(this);1==a.attr("data-control-value")?$("#whitename").show():$("#whitename").hide()});var d=new Array,o=new Array;$(".yes-add").click(function(){d.length=0,o.length=0,$('.modal-body input[name="whiteListName"]:checked').each(function(){d.push($(this).attr("data-userid")),o.push($(this).val())});var a=d.join("-"),t=o.join(",");$("#ccid").val(a),$("#cc-username").val(t),$("#myModal").modal("hide");var s=$("#ccid").val().split(",");$('.modal-body input[name="whiteListName"]').each(function(){$.inArray($(this).attr("data-userid"),s)>=0&&$(this).prop("checked",!0)})}),$("form.serach-form select").each(function(){var a=$(this);$(this).children("option").each(function(){$(this).html()===a.attr("data-type")&&$(this).prop("selected",!0)})})});